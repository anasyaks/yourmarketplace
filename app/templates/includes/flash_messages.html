{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="fixed bottom-4 right-4 space-y-2 z-50 max-w-xs w-full">
      {% for category, message in messages %}
        <div class="flash-message flex items-start px-4 py-3 rounded-lg shadow-lg 
                    {% if category == 'success' %}bg-green-50 text-green-800 border border-green-200
                    {% elif category == 'danger' %}bg-red-50 text-red-800 border border-red-200
                    {% elif category == 'warning' %}bg-yellow-50 text-yellow-800 border border-yellow-200
                    {% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}"
             x-data="{ show: true }" 
             x-show="show" 
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 translate-y-2"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-300"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 translate-y-2"
             x-init="setTimeout(() => show = false, 5000)">
          
          <!-- Icon -->
          <div class="mr-3 mt-0.5 flex-shrink-0">
            <i class="fas 
              {% if category == 'success' %}fa-check-circle
              {% elif category == 'danger' %}fa-exclamation-circle
              {% elif category == 'warning' %}fa-exclamation-triangle
              {% else %}fa-info-circle{% endif %}"></i>
          </div>
          
          <!-- Message -->
          <div class="flex-grow">
            <p class="text-sm font-medium">{{ message }}</p>
          </div>
          
          <!-- Close Button -->
          <button @click="show = false" class="ml-2 text-gray-400 hover:text-gray-500">
            <i class="fas fa-times"></i>
          </button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}