{% extends "base.html" %}
{# REMOVED: {% from 'components/product_card.html' import product_card %} #}
{# REMOVED: {% from 'components/shop_card.html' import shop_card %} #}

{% block title %}Welcome - Your Marketplace{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">
    <h1 class="text-5xl font-extrabold text-gray-900 mb-4 text-center">Discover Amazing Products</h1>
    <p class="text-xl text-gray-600 mb-12 text-center">Your one-stop shop for everything you need.</p>

    {# Search Bar #}
    <div class="mb-12 max-w-2xl mx-auto">
        <form action="{{ url_for('customer.search') }}" method="GET" class="flex rounded-md shadow-sm">
            <input type="text" name="q" placeholder="Search for products or shops..."
                   class="flex-1 min-w-0 block w-full px-4 py-3 border border-gray-300 rounded-l-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg">
            <button type="submit" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-r-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                Search
            </button>
        </form>
    </div>

    {# Browse by Category Section #}
    {% if categories %}
    <section class="mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Browse by Category</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
            {% for category in categories %}
                <a href="{{ url_for('customer.search', category_id=category.id) }}"
                   class="flex flex-col items-center justify-center p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 text-center text-gray-700 hover:text-indigo-600">
                    {# Using the Tag icon #}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 mb-2 text-indigo-500">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.529 9.529A7.5 7.5 0 0116.5 12a7.5 7.5 0 01-7.5 7.5c-1.636 0-3.18-.5-4.47-1.374m0 0L3 19.5m1.5-1.5L.75 21M14.25 5.25L16.5 3h.75m-3.75 3.75L17.25 10.5m-7.5 3.75H12m-7.5 3.75H9m-3.75 3.75H6" />
                    </svg>
                    <span class="text-sm font-medium">{{ category.name }}</span>
                </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {# Featured Products Section #}
    {% if featured_products %}
    <section class="mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Featured Products</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for product in featured_products %}
                {% include 'components/product_card.html' %} {# CRITICAL FIX: Changed to include #}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {# Featured Shops Section #}
    {% if featured_shops %}
    <section>
        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Featured Shops</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for shop in featured_shops %}
                {% include 'components/shop_card.html' %} {# CRITICAL FIX: Changed to include #}
            {% endfor %}
        </div>
    </section>
    {% endif %}
</div>
{% endblock %}
